<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片组展示</title>
    <style>
       .image-container {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            border: 1px solid #ccc;
            margin: 10px;
        }

       .image-container-mobile {
            flex-direction: column;
        }

       .image-item {
            position: relative;
            width: 50%;
            overflow: hidden;
        }

       .image-item-mobile {
            width: 100%;
        }

       .image-item img {
            width: 100%;
            height: auto;
            cursor: move;
        }

       .image-item.file-name {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: white;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 5px;
        }

       .separator {
            width: 1px;
            background-color: #ccc;
        }

       .separator-mobile {
            height: 1px;
        }
    </style>
</head>

<body>
    <div id="image-groups"></div>

    <script>
        // 模拟图片组数据
        const imageGroups = [
            { files: ['https://erp-new.cdn.yingtaoyun.com/flw/1784/Q2406170015/jx/1097056/P001.jpg'] },
            { files: ['https://erp-new.cdn.yingtaoyun.com/flw/1784/Q2406170015/jx/1097056/P003.jpg', 'https://erp-new.cdn.yingtaoyun.com/flw/1784/Q2406170015/jx/1097056/P004.jpg'] },
            { files: ['https://erp-new.cdn.yingtaoyun.com/flw/1784/Q2406170015/jx/1097056/P002.jpg'] }
        ];

        const imageGroupsContainer = document.getElementById('image-groups');

        function createImageElement(src, fileName) {
            const img = document.createElement('img');
            img.src = src;
            const nameElement = document.createElement('div');
            nameElement.textContent = fileName;
            nameElement.classList.add('file-name');
            const item = document.createElement('div');
            item.classList.add('image-item');
            if (window.innerWidth <= 768) {
                item.classList.add('image-item-mobile');
            }
            item.appendChild(img);
            item.appendChild(nameElement);
            return item;
        }

        function createSeparator() {
            const separator = document.createElement('div');
            separator.classList.add('separator');
            if (window.innerWidth <= 768) {
                separator.classList.add('separator-mobile');
            }
            return separator;
        }

        function loadImageGroup(group) {
            const groupContainer = document.createElement('div');
            if (window.innerWidth <= 768) {
                groupContainer.classList.add('image-container-mobile');
            } else {
                groupContainer.classList.add('image-container');
            }

            if (group.files.length === 1) {
                const item = createImageElement(group.files[0], group.files[0]);
                groupContainer.appendChild(item);
            } else if (group.files.length === 2) {
                const item1 = createImageElement(group.files[0], group.files[0]);
                const item2 = createImageElement(group.files[1], group.files[1]);
                const separator = createSeparator();
                groupContainer.appendChild(item1);
                groupContainer.appendChild(separator);
                groupContainer.appendChild(item2);

                // 实现同步拖动和缩放
                const img1 = item1.querySelector('img');
                const img2 = item2.querySelector('img');
                let isDragging = false;
                let startX, startY;
                let initialScale = 1;

                function handleMouseDown(e) {
                    isDragging = true;
                    startX = e.clientX;
                    startY = e.clientY;
                    initialScale = img1.clientWidth / img1.naturalWidth;
                    document.addEventListener('mousemove', handleMouseMove);
                    document.addEventListener('mouseup', handleMouseUp);
                }

                function handleMouseMove(e) {
                    if (isDragging) {
                        const dx = e.clientX - startX;
                        const dy = e.clientY - startY;
                        img1.style.transform = `translate(${dx}px, ${dy}px) scale(${initialScale})`;
                        img2.style.transform = `translate(${dx}px, ${dy}px) scale(${initialScale})`;
                    }
                }

                function handleMouseUp() {
                    isDragging = false;
                    document.removeEventListener('mousemove', handleMouseMove);
                    document.removeEventListener('mouseup', handleMouseUp);
                }

                img1.addEventListener('mousedown', handleMouseDown);
                img2.addEventListener('mousedown', handleMouseDown);

                function handleWheel(e) {
                    e.preventDefault();
                    const delta = e.deltaY > 0? 0.1 : -0.1;
                    const newScale = initialScale + delta;
                    if (newScale >= 0.1 && newScale <= 5) {
                        initialScale = newScale;
                        img1.style.transform = `scale(${initialScale})`;
                        img2.style.transform = `scale(${initialScale})`;
                    }
                }

                img1.addEventListener('wheel', handleWheel);
                img2.addEventListener('wheel', handleWheel);
            }

            imageGroupsContainer.appendChild(groupContainer);
        }

        imageGroups.forEach(loadImageGroup);

        // 响应式布局调整
        window.addEventListener('resize', () => {
            const containers = document.querySelectorAll('.image-container');
            const mobileContainers = document.querySelectorAll('.image-container-mobile');
            if (window.innerWidth <= 768) {
                containers.forEach(container => {
                    container.classList.remove('image-container');
                    container.classList.add('image-container-mobile');
                });
                mobileContainers.forEach(container => {
                    container.classList.add('image-container-mobile');
                });
            } else {
                containers.forEach(container => {
                    container.classList.add('image-container');
                });
                mobileContainers.forEach(container => {
                    container.classList.remove('image-container-mobile');
                    container.classList.add('image-container');
                });
            }
        });
    </script>
</body>

</html>
